C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE TV_Mode
OBJECT MODULE PLACED IN TV_Mode.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE TV_Mode.c XSMALL OPTIMIZE(9,SPEED) BROWSE DEBUG TABS(2) 

stmt  level    source

    1          #include "TV_Mode.h"
    2          #include "OLED.h"
    3          #include "DATA.h"
    4          #include "ADC.h"
    5          
    6          extern u16 dat00[System_data_num];
    7          extern u16 dat00_low[System_data_num];
    8          extern u8 xdata dat00_flag[System_data_num];
    9          
   10          extern u8 Time_New[7];
   11          extern u8 Time_Low[7];
   12          
   13          extern u32 xdata JCQ06_00[10];
   14          
   15          u16 Low_wendu = 0;
   16          
   17          u8 Sound_display_flag = 0;
   18          
   19          u8 New_time_num[7];
   20          u8 Low_time_num[7];
   21          
   22          //========================================================================
   23          // å‡½æ•°: time_show_s()
   24          // æè¿°: åˆå§‹åŒ–å·¦ä¸Šè§’8*16æ—¶åˆ†ç§’
   25          // å‚æ•°:
   26          // è¿”å›:
   27          // ç‰ˆæœ¬: V1.0 2023.02.05
   28          //========================================================================
   29          void time_show_s()
   30          {
   31   1          ZF_8X16(0, 0, (u8)(New_time_num[4]));  // æ˜¾ç¤ºæ—¶åä½
   32   1          ZF_8X16(8, 0, (u8)(New_time_num[5]));  // æ˜¾ç¤ºæ—¶ä¸ªä½
   33   1          ZF_8X16(16, 0, 20);                    // æ˜¾ç¤º-
   34   1          ZF_8X16(24, 0, (u8)(New_time_num[2])); // æ˜¾ç¤ºåˆ†åä½
   35   1          ZF_8X16(32, 0, (u8)(New_time_num[3])); // æ˜¾ç¤ºåˆ†ä¸ªä½
   36   1          ZF_8X16(40, 0, 20);                    // æ˜¾ç¤º-
   37   1          ZF_8X16(48, 0, (u8)(New_time_num[0])); // æ˜¾ç¤ºç§’åä½
   38   1          ZF_8X16(56, 0, (u8)(New_time_num[1])); // æ˜¾ç¤ºç§’ä¸ªä½
   39   1      }
   40          
   41          //========================================================================
   42          // å‡½æ•°: UI_humidity()
   43          // æè¿°: æ˜¾ç¤ºæ¹¿åº¦
   44          // å‚æ•°:
   45          // è¿”å›:
   46          // ç‰ˆæœ¬: V1.0 2023.02.05
   47          //========================================================================
   48          void UI_humidity()
   49          {
   50   1          ZF_8X16(88, 2, (u8)(dat00[0x0042] / 1000));         // æ˜¾ç¤ºæ¹¿åº¦åä½
   51   1          ZF_8X16(96, 2, (u8)((dat00[0x0042] % 1000) / 100)); ////æ˜¾ç¤ºæ¹¿åº¦ä¸ªä½
   52   1          ZF_8X16(112, 2, (u8)((dat00[0x0042] % 100) / 10));  ////æ˜¾ç¤ºæ¹¿åº¦å°æ•°ç‚¹åä¸€ä½
   53   1      }
   54          
   55          //========================================================================
   56          // å‡½æ•°: UI_pressure()
   57          // æè¿°: åˆå§‹åŒ–æ°”å‹æ˜¾ç¤º
   58          // å‚æ•°:
   59          // è¿”å›:
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 2   

   60          // ç‰ˆæœ¬: V1.0 2023.02.05
   61          //========================================================================
   62          void UI_pressure()
   63          {
   64   1          u16 k = 0;
   65   1      
   66   1          k = JCQ06_00[4] / 10;
   67   1      
   68   1          ZF_8X8(120, 5, (u8)(k % 10));
   69   1          ZF_8X8(108, 5, (u8)((k % 100) / 10));
   70   1          ZF_8X8(100, 5, (u8)((k % 1000) / 100));
   71   1          ZF_8X8(92, 5, (u8)((k % 10000) / 1000));
   72   1          k = k / 10000;
   73   1          if (k)
   74   1          {
   75   2              ZF_8X8(84, 5, (u8)(k));
   76   2          }
   77   1          else
   78   1          {
   79   2              ZF_8X8(84, 5, 10); // æ˜¾ç¤ºç©ºç™½
   80   2          }
   81   1      }
   82          
   83          //========================================================================
   84          // å‡½æ•°: u8 Week_conversion()
   85          // æè¿°: è¿”å›æ˜ŸæœŸå‡ åœ¨ç‚¹é˜µä¸­çš„ä½ç½®
   86          // å‚æ•°:
   87          // è¿”å›:
   88          // ç‰ˆæœ¬: V1.0 2023.02.05
   89          //========================================================================
   90          u8 Week_conversion()
   91          {
   92   1          u8 p = 0;
   93   1          if (Time_New[3] & 0x01)
   94   1          {
   95   2              p = 13;
   96   2          }
   97   1          else if (Time_New[3] & 0x02)
   98   1          {
   99   2              p = 14;
  100   2          }
  101   1          else if (Time_New[3] & 0x04)
  102   1          {
  103   2              p = 15;
  104   2          }
  105   1          else if (Time_New[3] & 0x08)
  106   1          {
  107   2              p = 16;
  108   2          }
  109   1          else if (Time_New[3] & 0x10)
  110   1          {
  111   2              p = 17;
  112   2          }
  113   1          else if (Time_New[3] & 0x20)
  114   1          {
  115   2              p = 18;
  116   2          }
  117   1          else if (Time_New[3] & 0x40)
  118   1          {
  119   2              p = 19;
  120   2          }
  121   1          return p;
  122   1      }
  123          
  124          //========================================================================
  125          // å‡½æ•°: Time_comparison_GET1()
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 3   

  126          // æè¿°: å°†ç§’åˆ†æ—¶çš„ä¸ªä½å’Œåä½æ‹¿å‡ºæ¥
  127          // å‚æ•°:
  128          // è¿”å›:
  129          // ç‰ˆæœ¬: V1.0 2023.02.05
  130          //========================================================================
  131          void Time_comparison_GET1()
  132          {
  133   1      
  134   1          New_time_num[1] = Time_New[0] % 16;
  135   1          New_time_num[0] = Time_New[0] / 16;
  136   1          New_time_num[3] = Time_New[1] % 16;
  137   1          New_time_num[2] = Time_New[1] / 16;
  138   1          New_time_num[5] = Time_New[2] % 16;
  139   1          New_time_num[4] = Time_New[2] / 16;
  140   1      }
  141          
  142          //========================================================================
  143          // å‡½æ•°: u16 Time_comparison()
  144          // æè¿°: è¿”å›å¹´æœˆæ—¥æ˜ŸæœŸæ—¶åˆ†ç§’æ˜¯å¦æ›´æ–°
  145          // å‚æ•°:
  146          // è¿”å›:
  147          // ç‰ˆæœ¬: V1.0 2023.02.05
  148          //========================================================================
  149          u16 Time_comparison()
  150          {
  151   1          u16 j = 0;
  152   1      
  153   1          Time_comparison_GET1();
  154   1          if (Time_New[0] != Time_Low[0])
  155   1          {
  156   2              if (New_time_num[0] != Low_time_num[0])
  157   2                  j |= 0x0002;
  158   2              if (New_time_num[1] != Low_time_num[1])
  159   2                  j |= 0x0001;
  160   2          }
  161   1      
  162   1          if (Time_New[1] != Time_Low[1])
  163   1          {
  164   2              if (New_time_num[2] != Low_time_num[2])
  165   2                  j |= 0x0008;
  166   2              if (New_time_num[3] != Low_time_num[3])
  167   2                  j |= 0x0004;
  168   2          }
  169   1      
  170   1          if (Time_New[2] != Time_Low[2])
  171   1          {
  172   2              if (New_time_num[4] != Low_time_num[4])
  173   2                  j |= 0x0020;
  174   2              if (New_time_num[5] != Low_time_num[5])
  175   2                  j |= 0x0010;
  176   2          }
  177   1          if (Time_New[3] != Time_Low[3])
  178   1              j |= 0x0040;
  179   1          if (Time_New[4] != Time_Low[4])
  180   1              j |= 0x0080;
  181   1          if (Time_New[5] != Time_Low[5])
  182   1              j |= 0x0100;
  183   1          if (Time_New[6] != Time_Low[6])
  184   1              j |= 0x0200;
  185   1      
  186   1          return j;
  187   1      }
  188          
  189          //========================================================================
  190          // å‡½æ•°: time_synchronization()
  191          // æè¿°: æ—§æ—¶é—´Time_Low[]æ›´æ–°
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 4   

  192          // å‚æ•°:
  193          // è¿”å›:
  194          // ç‰ˆæœ¬: V1.0 2023.02.05
  195          //========================================================================
  196          void time_synchronization()
  197          {
  198   1          u8 i = 0;
  199   1          for (i = 0; i < 7; i++)
  200   1          {
  201   2              Time_Low[i] = Time_New[i];
  202   2              Low_time_num[i] = New_time_num[i];
  203   2          }
  204   1      }
  205          
  206          //========================================================================
  207          // å‡½æ•°: TVMode_int()
  208          // æè¿°: æ—§æ—¶é—´Time_Low[]æ›´æ–°
  209          // å‚æ•°:
  210          // è¿”å›:
  211          // ç‰ˆæœ¬: V1.0 2023.02.05
  212          //========================================================================
  213          void TVMode_int()
  214          {
  215   1          Time_comparison_GET1();
  216   1          IU_Battery_Icon_S(80, 0, 1); // æ˜¾ç¤ºç”µæ± UI
  217   1      
  218   1          yue_ri(0, 20, 0);                                                  // æ˜¾ç¤ºå¹´ä»½å‰é¢çš„20
  219   1          yue_ri(16, (u8)((Time_New[6] / 16 * 10) + (Time_New[6] % 16)), 0); // æ˜¾ç¤ºå¹´ä»½20XXåé¢çš„XX
  220   1      
  221   1          ZF_8X16(32, 0, 22); //"-"
  222   1      
  223   1          yue_ri(37, (u8)((Time_New[5] / 16 * 10) + (Time_New[5] % 16)), 0); // æœˆ
  224   1      
  225   1          ZF_8X16(53, 0, 22); //"-"
  226   1      
  227   1          yue_ri(59, (u8)((Time_New[4] / 16 * 10) + (Time_New[4] % 16)), 0); // æ—¥
  228   1      
  229   1          ZF_8X16(112, 1, Week_conversion()); // æ˜¾ç¤ºæ˜ŸæœŸ
  230   1      
  231   1          ZF_8X16(100, 1, 29); // æ˜¾ç¤ºâ€œæ˜Ÿâ€
  232   1          ZF_8X16(88, 1, 28);  // æ˜¾ç¤ºâ€œæœŸâ€
  233   1      
  234   1          // ä¸¤ä¸ªå†’å·
  235   1          shifen(12, 40);
  236   1          shifen(12, 80);
  237   1      
  238   1          // æ—¶
  239   1          shifen_dh(8, 3, (New_time_num[4]) * 32, 40);
  240   1          shifen_dh(24, 3, (New_time_num[5]) * 32, 40);
  241   1      
  242   1          // åˆ†
  243   1          shifen_dh(48, 3, (New_time_num[2]) * 32, 40);
  244   1          shifen_dh(64, 3, (New_time_num[3]) * 32, 40);
  245   1      
  246   1          // ç§’
  247   1          shifen_dh(88, 3, (New_time_num[0]) * 32, 40);
  248   1          shifen_dh(104, 3, (New_time_num[1]) * 32, 40);
  249   1          time_synchronization();
  250   1      }
  251          
  252          //========================================================================
  253          // å‡½æ•°: TVMode2_int()
  254          // æè¿°: æ˜¾ç¤ºæ¸©åº¦æ¹¿åº¦æ°”å‹åˆå§‹åŒ–
  255          // å‚æ•°:
  256          // è¿”å›:
  257          // ç‰ˆæœ¬: V1.0 2023.02.05
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 5   

  258          //========================================================================
  259          void TVMode2_int()
  260          {
  261   1          IU_Battery_Icon_S(80, 0, 1);
  262   1          time_show_s();
  263   1          shifen_dh(4, 3, (dat00[0x0041] / 1000) << 5, 40);
  264   1          shifen_dh(20, 3, ((dat00[0x0041] % 1000) / 100) << 5, 40);
  265   1          shifen_dh(36, 3, 11 << 5, 100);
  266   1          shifen_dh(44, 3, ((dat00[0x0041] % 100) / 10) << 5, 40);
  267   1          shifen_dh(60, 3, 13 << 5, 100);
  268   1      
  269   1          UI_humidity();
  270   1          ZF_8X16(104, 2, 11);
  271   1          ZF_8X16(120, 2, 21);
  272   1          ZF_8X8(116, 5, 15);
  273   1          ZF_8X8(120, 6, 14);
  274   1          ZF_8X8(112, 6, 13);
  275   1          ZF_8X8(104, 6, 12);
  276   1          UI_pressure();
  277   1      
  278   1          time_synchronization();
  279   1      }
  280          
  281          //========================================================================
  282          // å‡½æ•°: TVMode3_int()
  283          // æè¿°: æ˜¾ç¤ºç”µæºæ˜¾ç¤ºç•Œé¢åˆå§‹åŒ–
  284          // å‚æ•°:
  285          // è¿”å›:
  286          // ç‰ˆæœ¬: V1.0 2023.02.05
  287          //========================================================================
  288          void TVMode3_int()
  289          {
  290   1          time_show_s();
  291   1          IU_Battery_cheek();
  292   1          IU_Battery_cheek_renovate();
  293   1          time_synchronization();
  294   1      }
  295          
  296          //========================================================================
  297          // å‡½æ•°: void TVMode_1()
  298          // æè¿°: æ—¶é’Ÿç•Œé¢å±€éƒ¨åˆ·æ–°
  299          // å‚æ•°:
  300          // è¿”å›:
  301          // ç‰ˆæœ¬: V1.0 2023.02.05
  302          //========================================================================
  303          void TVMode_1()
  304          {
  305   1          u16 dat = 0;
  306   1      
  307   1          if (dat00[0x0009] & 0x0001)
  308   1          {
  309   2              // ç§’åˆ·æ–°
  310   2              shifen_dh(104, 3, (33 - dat00[0x12] + (Low_time_num[1]) * 32), 40);
  311   2              if (dat00[0x0000] & 0x0004)
  312   2              {
  313   3                  IU_Battery_Icon_S(80, 0, 0);
  314   3                  dat00[0x0000] &= ~0x0004;
  315   3              }
  316   2          }
  317   1          if (dat00[0x0009] & 0x0002)
  318   1          {
  319   2              shifen_dh(88, 3, (33 - dat00[0x12] + (Low_time_num[0]) * 32), 24);
  320   2          }
  321   1          if (dat00[0x0009] & 0x0004)
  322   1          {
  323   2              shifen_dh(64, 3, (33 - dat00[0x12] + (Low_time_num[3]) * 32), 40);
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 6   

  324   2          }
  325   1          if (dat00[0x0009] & 0x0008)
  326   1          {
  327   2              shifen_dh(48, 3, (33 - dat00[0x12] + (Low_time_num[2]) * 32), 24);
  328   2          }
  329   1          if (dat00[0x0009] & 0x0010)
  330   1          {
  331   2              if ((u8)(Low_time_num[4]) == 2)
  332   2              {
  333   3                  shifen_dh(24, 3, (33 - dat00[0x12] + (Low_time_num[5]) * 32), 16);
  334   3              }
  335   2              else
  336   2              {
  337   3                  shifen_dh(24, 3, (33 - dat00[0x12] + (Low_time_num[5]) * 32), 40);
  338   3              }
  339   2          }
  340   1          if (dat00[0x0009] & 0x0020)
  341   1          {
  342   2              shifen_dh(8, 3, (33 - dat00[0x12] + (Low_time_num[4]) * 32), 12);
  343   2          }
  344   1          if (dat00[0x0009] & 0x0040)
  345   1          {
  346   2              ZF_8X16(112, 1, Week_conversion());
  347   2          }
  348   1          if (dat00[0x0009] & 0x0080)
  349   1          {
  350   2              yue_ri(59, (u8)((Time_New[4] / 16 * 10) + (Time_New[4] % 16)), 0); //
  351   2          }
  352   1          if (dat00[0x0009] & 0x0100)
  353   1          {
  354   2              yue_ri(37, (u8)((Time_New[5] / 16 * 10) + (Time_New[5] % 16)), 0); //
  355   2          }
  356   1          if (dat00[0x0009] & 0x0200)
  357   1          {
  358   2              yue_ri(16, (u8)((Time_New[6] / 16 * 10) + (Time_New[6] % 16)), 0); //
  359   2          }
  360   1          // time_synchronization();
  361   1      }
  362          
  363          //========================================================================
  364          // å‡½æ•°: void TVMode_23TimeRenew(u16 dat)
  365          // æè¿°: å·¦ä¸Šè§’æ—¶åˆ†ç§’å±€éƒ¨åˆ·æ–°
  366          // å‚æ•°: datåˆ·æ–°æ ‡å¿—ä½
  367          // è¿”å›:
  368          // ç‰ˆæœ¬: V1.0 2023.02.05
  369          //========================================================================
  370          void TVMode_23TimeRenew(u16 dat)
  371          {
  372   1      
  373   1          if (dat & 0x0001) // ç§’åˆ·æ–°
  374   1          {
  375   2              ZF_8X16(56, 0, (u8)(New_time_num[1]));
  376   2          }
  377   1          if (dat & 0x0002)
  378   1          {
  379   2              ZF_8X16(48, 0, (u8)(New_time_num[0]));
  380   2          }
  381   1      
  382   1          if (dat & 0x0004)
  383   1          {
  384   2              ZF_8X16(32, 0, (u8)(New_time_num[3]));
  385   2          }
  386   1          if (dat & 0x0008)
  387   1          {
  388   2              ZF_8X16(24, 0, (u8)(New_time_num[2]));
  389   2          }
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 7   

  390   1      
  391   1          if (dat & 0x0010)
  392   1          {
  393   2              ZF_8X16(8, 0, (u8)(New_time_num[5]));
  394   2          }
  395   1          if (dat & 0x0020)
  396   1          {
  397   2              ZF_8X16(0, 0, (u8)(New_time_num[4]));
  398   2          }
  399   1      }
  400          
  401          //========================================================================
  402          // å‡½æ•°: void TVMode_2()
  403          // æè¿°: æ¸©åº¦æ¹¿åº¦æ°”å‹ç•Œé¢å±€éƒ¨åˆ·æ–°
  404          // å‚æ•°:
  405          // è¿”å›:
  406          // ç‰ˆæœ¬: V1.0 2023.02.05
  407          //========================================================================
  408          void TVMode_2()
  409          {
  410   1          u16 dat = 0;
  411   1          IU_Battery_Icon_S(80, 0, 0);
  412   1          TVMode_23TimeRenew(dat00[0x0009]);
  413   1      
  414   1          dat = dat00[0x0041] / 1000;
  415   1          if (dat != (Low_wendu / 1000))
  416   1          {
  417   2              shifen_dh(4, 3, dat << 5, 40);
  418   2          }
  419   1      
  420   1          dat = (dat00[0x0041] % 1000) / 100;
  421   1          if (dat != (Low_wendu % 1000) / 100)
  422   1          {
  423   2              shifen_dh(20, 3, ((dat00[0x0041] % 1000) / 100) << 5, 40);
  424   2          }
  425   1      
  426   1          dat = (dat00[0x0041] % 100) / 10;
  427   1          if (dat != (Low_wendu % 100) / 10)
  428   1          {
  429   2              shifen_dh(44, 3, dat << 5, 40);
  430   2          }
  431   1          //**************æ¸©æ¹¿åº¦*****************************
  432   1      
  433   1          UI_humidity();
  434   1          UI_pressure();
  435   1      
  436   1          Low_wendu = dat00[0x0041];
  437   1          time_synchronization();
  438   1      }
  439          
  440          //========================================================================
  441          // å‡½æ•°: void TVMode_2()
  442          // æè¿°: ç”µæºæ˜¾ç¤ºç•Œé¢å±€éƒ¨åˆ·æ–°
  443          // å‚æ•°:
  444          // è¿”å›:
  445          // ç‰ˆæœ¬: V1.0 2023.02.05
  446          //========================================================================
  447          void TVMode_3()
  448          {
  449   1          u16 dat = 0;
  450   1      
  451   1          // ADC_Get_V1();
  452   1          TVMode_23TimeRenew(dat00[0x0009]);
  453   1          IU_Battery_cheek_renovate();
  454   1          time_synchronization();
  455   1      }
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 8   

  456          
  457          //========================================================================
  458          // å‡½æ•°: IU_TVMode()
  459          // æè¿°: TVæ¨¡å¼ä»»åŠ¡å¤„ç†
  460          // å‚æ•°:
  461          // è¿”å›:
  462          // ç‰ˆæœ¬: V1.0 2023.02.05
  463          //========================================================================
  464          void IU_TVMode()
  465          {
  466   1          u8 a = 0;
  467   1          u16 DA = 0;
  468   1          u16 DB = 0;
  469   1          u16 DC = 0;
  470   1      
  471   1          if (dat00[0x10] == 0x0020 && dat00[0x1A] == 0 && dat00[0x002E] > 0) // TVæ—¶é’Ÿæ¨¡å¼
  472   1          {
  473   2              if ((dat00[0x002E] & 0x0001) && !(dat00[0x002E] & 0x0002))
  474   2              {
  475   3                  dat00[0x002E] |= 0x0002; // éšè—å¯„å­˜å™¨ï¼ˆæ—¶é—´æ›´æ–°çŠ¶æ€ä½å¯„å­˜å™¨ï¼‰0x0002 å¼€å§‹ç
             -§’åˆ·æ–°æ ‡å¿—ä½
  476   3              }
  477   2              if ((dat00[0x002E] & 0x0001) && (dat00[0x002E] & 0x0002))
  478   2              {
  479   3                  if (dat00[0x12] == 0x0000 && !(dat00[0x002E] & 0x0004)) // UIçº¿ç¨‹è¿ç®—æ¬¡æ•°ä¸ºé›¶ + ä¸åœ
             -¨ç§’åˆ·æ–°
  480   3                  {
  481   4                      dat00[0x12] = 32;                  // UIçº¿ç¨‹è¿ç®—æ¬¡æ•°å¯„å­˜å™¨ = 32
  482   4                      fast_SleepQueue_aheadW1(8, 1, 32); // ç”³è¯·32ä¸ªUIåˆ·æ–°ä»»åŠ¡
  483   4                      dat00[0x002E] |= 0x0004;           // éšè—å¯„å­˜å™¨ï¼ˆæ—¶é—´æ›´æ–°çŠ¶æ€ä½å¯„å­˜å™¨ï¼‰
             -0x0004 å¼€å§‹ç§’åˆ·æ–°æ ‡å¿—ä½
  484   4                      dat00[0x0006] |= 0x0002;           // dat00[0x0006] bit1ï¼š0 æ—¶é’Ÿæ»šåŠ¨ç©ºé—² 1 æ—¶é’Ÿæ
             -»šåŠ¨ç¹å¿™
  485   4                      dat00[0] |= 0x0100;                // dat00[0x0006] bit8ï¼š0 UIç©ºé—² 1 UIæ»šåŠ¨
  486   4                  }
  487   3                  if (dat00[0x12] != 0x0000 && (dat00[0x002E] & 0x0004)) // UIçº¿ç¨‹è¿ç®—æ¬¡æ•°ä¸ä¸ºé›¶ + è¿˜
             -åœ¨ç§’åˆ·æ–°
  488   3                  {
  489   4                      TVMode_1();    // ç§’åˆ·æ–°
  490   4                      dat00[0x12]--; // UIçº¿ç¨‹è¿ç®—æ¬¡æ•°-1
  491   4                  }
  492   3                  if (dat00[0x12] == 0x0000 && (dat00[0x002E] & 0x0004)) // UIçº¿ç¨‹è¿ç®—æ¬¡æ•°ä¸ºé›¶ + è¿˜åœ¨
             -ç§’åˆ·æ–°
  493   3                  {
  494   4                      dat00[0x002E] = 0;        // ç»“æŸä»»åŠ¡
  495   4                      dat00[0x0006] &= ~0x0002; // dat00[0x0006] bit1ï¼š0 æ—¶é’Ÿæ»šåŠ¨ç©ºé—² 1 æ—¶é’Ÿæ»šåŠ¨ç¹å
             -¿™
  496   4                      dat00[0] |= 0x0100;       // dat00[0x0006] bit1ï¼š0 æ—¶é’Ÿæ»šåŠ¨ç©ºé—² 1 æ—¶é’Ÿæ»šåŠ¨ç¹å
             -¿™
  497   4                      time_synchronization();
  498   4                  }
  499   3              }
  500   2          }
  501   1          else if (dat00[0x10] == 0x0021 && dat00[0x1A] == 0 && dat00[0x002E] > 0) // TVæ—¶é’Ÿæ¨¡å¼
  502   1          {
  503   2              TVMode_2();
  504   2              dat00[0x002E] = 0;
  505   2              time_synchronization();
  506   2          }
  507   1          else if (dat00[0x10] == 0x0022 && dat00[0x1A] == 0 && dat00[0x002E] > 0) // TVæ—¶é’Ÿæ¨¡å¼
  508   1          {
  509   2              TVMode_3();
  510   2              dat00[0x002E] = 0;
  511   2              time_synchronization();
  512   2          }
  513   1      
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 9   

  514   1          a = (u8)P45 + (u8)P46 + (u8)P27; // æŸ¥è¯¢å¿«é€ŸæŸ¥è¯¢æŒ‰é”®çŠ¶æ€
  515   1          if ((dat00[0x0000] & 0x0008) && (a == 3) && (dat00[0x0010] >= 0x0020 && dat00[0x0010] <= 0x0022) && d
             -at00[0x1A] == 0)
  516   1          {
  517   2              if (dat00[0x37]) // å¦‚æœæ˜¯ä½åŠŸè€—æ¨¡å¼åˆ™è°ƒç”¨ä½åŠŸè€—æ¨¡å¼çš„æ˜¾ç¤ºæ—¶é•¿
  518   2              {
  519   3                  DA = dat00[0x0031]; // æ—¶é—´æ˜¾ç¤ºæ¨¡å¼æ—¶é•¿
  520   3                  DB = dat00[0x0032]; // æ¸©åº¦æ¹¿åº¦æ˜¾ç¤ºæ¨¡å¼æ—¶é•¿
  521   3                  DC = dat00[0x0033]; // ç”µæºæ˜¾ç¤ºæ¨¡å¼
  522   3              }
  523   2              else
  524   2              {
  525   3                  DA = dat00[0x0022];
  526   3                  DB = dat00[0x0023];
  527   3                  DC = dat00[0x0024];
  528   3              }
  529   2              dat00[0x002D]++;             // è®¡æ—¶
  530   2              if (dat00[0x0010] == 0x0020) // å¦‚æœæ˜¯æ—¶é—´æ˜¾ç¤ºé¡µé¢
  531   2              {
  532   3                  if (dat00[0x002D] >= DA) // æ—¶é—´æ˜¾ç¤ºé¡µé¢åˆ°è¾¾æŒ‡å®šçš„æ—¶é—´
  533   3                  {
  534   4                      if (DB > 0) // æ¸©æ¹¿åº¦æ˜¾ç¤ºè®¾å®šæ—¶é—´ä¸ä¸º0ï¼Œè·³åˆ°è¯¥é¡µé¢
  535   4                      {
  536   5                          dat00[0x10] = 0x0021;
  537   5                          dat00_flag[0x10] = 1;
  538   5                      }
  539   4                      else if (DC > 0) // ç”µæºæ˜¾ç¤ºè®¾å®šæ—¶é—´ä¸ä¸º0ï¼Œè·³åˆ°è¯¥é¡µé¢
  540   4                      {
  541   5                          dat00[0x10] = 0x0022;
  542   5                          dat00_flag[0x10] = 1;
  543   5                      }
  544   4                      if ((dat00[0x37] > 0) && (DB == 0) && (DC == 0))
  545   4                          dat00[0] |= 0x0020;
  546   4                      dat00[0x002D] = 0;
  547   4                  }
  548   3              }
  549   2              else if (dat00[0x0010] == 0x0021)
  550   2              {
  551   3                  if (dat00[0x002D] >= DB)
  552   3                  {
  553   4                      if (DC > 0)
  554   4                      {
  555   5                          dat00[0x10] = 0x0022;
  556   5                          dat00_flag[0x10] = 1;
  557   5                      }
  558   4                      else if (DA > 0)
  559   4                      {
  560   5                          dat00[0x10] = 0x0020;
  561   5                          dat00_flag[0x10] = 1;
  562   5                      }
  563   4                      if ((dat00[0x37] > 0) && (DC == 0))
  564   4                          dat00[0] |= 0x0020;
  565   4                      dat00[0x002D] = 0;
  566   4                  }
  567   3              }
  568   2              else if (dat00[0x0010] == 0x0022)
  569   2              {
  570   3                  if (dat00[0x002D] >= DC)
  571   3                  {
  572   4                      dat00[0x10] = 0x0020;
  573   4                      dat00_flag[0x10] = 1;
  574   4                      dat00[0x002D] = 0;
  575   4                      if ((dat00[0x37] > 0))
  576   4                          dat00[0] |= 0x0020;
  577   4                  }
  578   3              }
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  01:58:01  PAGE 10  

  579   2      
  580   2              dat00[0x0000] &= ~0x0008;
  581   2          }
  582   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      2670     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        17          3
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        11     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

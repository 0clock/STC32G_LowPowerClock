C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE TV_Mode
OBJECT MODULE PLACED IN TV_Mode.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE TV_Mode.c XSMALL OPTIMIZE(9,SPEED) BROWSE DEBUG TABS(2) 

stmt  level    source

    1          #include "TV_Mode.h"
    2          #include "OLED.h"
    3          #include "DATA.h"
    4          #include "ADC.h"
    5          
    6          extern u16 dat00[System_data_num];
    7          extern u16 dat00_low[System_data_num];
    8          extern u8 xdata dat00_flag[System_data_num];
    9          
   10          extern u8 Time_New[7];
   11          extern u8 Time_Low[7];
   12          
   13          extern u32 xdata JCQ06_00[10];
   14          
   15          u16 Low_wendu = 0;
   16          
   17          u8 Sound_display_flag=0;
   18          
   19          
   20          u8 New_time_num[7];
   21          u8 Low_time_num[7];
   22          
   23          
   24          
   25          
   26          
   27          
   28          
   29          
   30          
   31          //========================================================================
   32          // å‡½æ•°: time_show_s()
   33          // æè¿°: åˆå§‹åŒ–å·¦ä¸Šè§’8*16æ—¶åˆ†ç§’
   34          // å‚æ•°:
   35          // è¿”å›:
   36          // ç‰ˆæœ¬: V1.0 2023.02.05
   37          //========================================================================
   38          void time_show_s()
   39          {
   40   1          ZF_8X16(0,0,(u8)(New_time_num[4]));//æ˜¾ç¤ºæ—¶åä½
   41   1          ZF_8X16(8,0,(u8)(New_time_num[5]));//æ˜¾ç¤ºæ—¶ä¸ªä½
   42   1          ZF_8X16(16,0,20);//æ˜¾ç¤º-
   43   1          ZF_8X16(24,0,(u8)(New_time_num[2]));//æ˜¾ç¤ºåˆ†åä½
   44   1          ZF_8X16(32,0,(u8)(New_time_num[3]));//æ˜¾ç¤ºåˆ†ä¸ªä½
   45   1          ZF_8X16(40,0,20);//æ˜¾ç¤º-
   46   1          ZF_8X16(48,0,(u8)(New_time_num[0]));//æ˜¾ç¤ºç§’åä½
   47   1          ZF_8X16(56,0,(u8)(New_time_num[1]));//æ˜¾ç¤ºç§’ä¸ªä½
   48   1      }
   49          
   50          
   51          
   52          
   53          
   54          //========================================================================
   55          // å‡½æ•°: UI_humidity()
   56          // æè¿°: æ˜¾ç¤ºæ¹¿åº¦
   57          // å‚æ•°:
   58          // è¿”å›:
   59          // ç‰ˆæœ¬: V1.0 2023.02.05
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 2   

   60          //========================================================================
   61          void UI_humidity()
   62          {
   63   1          ZF_8X16(88,2,(u8)(dat00[0x0042]/1000));//æ˜¾ç¤ºæ¹¿åº¦åä½
   64   1          ZF_8X16(96,2,(u8)((dat00[0x0042]%1000)/100));////æ˜¾ç¤ºæ¹¿åº¦ä¸ªä½
   65   1          ZF_8X16(112,2,(u8)((dat00[0x0042]%100)/10));////æ˜¾ç¤ºæ¹¿åº¦å°æ•°ç‚¹åä¸€ä½
   66   1      }
   67          
   68          //========================================================================
   69          // å‡½æ•°: UI_pressure()
   70          // æè¿°: åˆå§‹åŒ–æ°”å‹æ˜¾ç¤º
   71          // å‚æ•°:
   72          // è¿”å›:
   73          // ç‰ˆæœ¬: V1.0 2023.02.05
   74          //========================================================================
   75          void UI_pressure()
   76          {
   77   1          u16 k = 0;
   78   1      
   79   1          k = JCQ06_00[4]/10;
   80   1      
   81   1      
   82   1          ZF_8X8(120,5,(u8)(k % 10));
   83   1          ZF_8X8(108,5,(u8)((k % 100)/10));
   84   1          ZF_8X8(100,5,(u8)((k % 1000)/100));
   85   1          ZF_8X8(92,5,(u8)((k % 10000)/1000));
   86   1          k = k / 10000;
   87   1          if(k)
   88   1          {
   89   2              ZF_8X8(84,5,(u8)(k));
   90   2          }
   91   1          else
   92   1          {
   93   2            ZF_8X8(84,5,10);//æ˜¾ç¤ºç©ºç™½
   94   2          }
   95   1      }
   96          
   97          
   98          
   99          
  100          //========================================================================
  101          // å‡½æ•°: u8 Week_conversion()
  102          // æè¿°: è¿”å›æ˜ŸæœŸå‡ åœ¨ç‚¹é˜µä¸­çš„ä½ç½®
  103          // å‚æ•°:
  104          // è¿”å›:
  105          // ç‰ˆæœ¬: V1.0 2023.02.05
  106          //========================================================================
  107          u8 Week_conversion()
  108          {
  109   1          u8 p = 0;
  110   1          if(Time_New[3] & 0x01)
  111   1          {
  112   2              p=13;
  113   2          }
  114   1          else if(Time_New[3] & 0x02)
  115   1          {
  116   2              p=14;
  117   2          }
  118   1          else if(Time_New[3] & 0x04)
  119   1          {
  120   2              p=15;
  121   2          }
  122   1          else if(Time_New[3] & 0x08)
  123   1          {
  124   2              p=16;
  125   2          }
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 3   

  126   1          else if(Time_New[3] & 0x10)
  127   1          {
  128   2              p=17;
  129   2          }
  130   1          else if(Time_New[3] & 0x20)
  131   1          {
  132   2              p=18;
  133   2          }
  134   1          else if(Time_New[3] & 0x40)
  135   1          {
  136   2              p=19;
  137   2          }
  138   1          return p;
  139   1      
  140   1      
  141   1      
  142   1      }
  143          
  144          
  145          
  146          
  147          
  148          
  149          
  150          
  151          //========================================================================
  152          // å‡½æ•°: Time_comparison_GET1()
  153          // æè¿°: å°†ç§’åˆ†æ—¶çš„ä¸ªä½å’Œåä½æ‹¿å‡ºæ¥
  154          // å‚æ•°:
  155          // è¿”å›:
  156          // ç‰ˆæœ¬: V1.0 2023.02.05
  157          //========================================================================
  158          void Time_comparison_GET1()
  159          {
  160   1      
  161   1          New_time_num[1] = Time_New[0]%16;
  162   1          New_time_num[0] = Time_New[0]/16;
  163   1          New_time_num[3] = Time_New[1]%16;
  164   1          New_time_num[2] = Time_New[1]/16;
  165   1          New_time_num[5] = Time_New[2]%16;
  166   1          New_time_num[4] = Time_New[2]/16;
  167   1      
  168   1      }
  169          
  170          //========================================================================
  171          // å‡½æ•°: u16 Time_comparison()
  172          // æè¿°: è¿”å›å¹´æœˆæ—¥æ˜ŸæœŸæ—¶åˆ†ç§’æ˜¯å¦æ›´æ–°
  173          // å‚æ•°:
  174          // è¿”å›:
  175          // ç‰ˆæœ¬: V1.0 2023.02.05
  176          //========================================================================
  177          u16 Time_comparison()
  178          {
  179   1          u16 j = 0;
  180   1      
  181   1          Time_comparison_GET1();
  182   1          if(Time_New[0] != Time_Low[0])
  183   1          {
  184   2              if(New_time_num[0] != Low_time_num[0])  j |= 0x0002;
  185   2              if(New_time_num[1] != Low_time_num[1])  j |= 0x0001;
  186   2          }
  187   1      
  188   1          if(Time_New[1] != Time_Low[1])
  189   1          {
  190   2              if(New_time_num[2] != Low_time_num[2])  j |= 0x0008;
  191   2              if(New_time_num[3] != Low_time_num[3])  j |= 0x0004;
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 4   

  192   2          }
  193   1      
  194   1          if(Time_New[2] != Time_Low[2])
  195   1          {
  196   2              if(New_time_num[4] != Low_time_num[4])  j |= 0x0020;
  197   2              if(New_time_num[5] != Low_time_num[5])  j |= 0x0010;
  198   2          }
  199   1          if(Time_New[3] != Time_Low[3]) j |= 0x0040;
  200   1          if(Time_New[4] != Time_Low[4]) j |= 0x0080;
  201   1          if(Time_New[5] != Time_Low[5]) j |= 0x0100;
  202   1          if(Time_New[6] != Time_Low[6]) j |= 0x0200;
  203   1      
  204   1          return j;
  205   1      }
  206          
  207          
  208          //========================================================================
  209          // å‡½æ•°: time_synchronization()
  210          // æè¿°: æ—§æ—¶é—´Time_Low[]æ›´æ–°
  211          // å‚æ•°:
  212          // è¿”å›:
  213          // ç‰ˆæœ¬: V1.0 2023.02.05
  214          //========================================================================
  215          void time_synchronization()
  216          {
  217   1          u8 i = 0;
  218   1          for(i=0; i<7; i++)
  219   1          {
  220   2              Time_Low[i] = Time_New[i];
  221   2              Low_time_num[i] = New_time_num[i];
  222   2          }
  223   1      }
  224          
  225          
  226          
  227          //========================================================================
  228          // å‡½æ•°: TVMode_int()
  229          // æè¿°: æ—§æ—¶é—´Time_Low[]æ›´æ–°
  230          // å‚æ•°:
  231          // è¿”å›:
  232          // ç‰ˆæœ¬: V1.0 2023.02.05
  233          //========================================================================
  234          void TVMode_int()
  235          {
  236   1          Time_comparison_GET1();
  237   1          IU_Battery_Icon_S(80,0,1);//æ˜¾ç¤ºç”µæ± UI
  238   1      
  239   1      
  240   1          yue_ri(0,20,0);//æ˜¾ç¤ºå¹´ä»½å‰é¢çš„20
  241   1          yue_ri(16,(u8)((Time_New[6]/16*10) + (Time_New[6]%16)),0);//æ˜¾ç¤ºå¹´ä»½20XXåé¢çš„XX
  242   1      
  243   1          ZF_8X16(32,0,22);//"-"
  244   1      
  245   1          yue_ri(37,(u8)((Time_New[5]/16*10) + (Time_New[5]%16)),0);//æœˆ
  246   1      
  247   1          ZF_8X16(53,0,22);//"-"
  248   1      
  249   1          yue_ri(59,(u8)((Time_New[4]/16*10) + (Time_New[4]%16)),0);//æ—¥
  250   1      
  251   1          ZF_8X16(112,1,Week_conversion());//æ˜¾ç¤ºæ˜ŸæœŸ
  252   1      
  253   1          ZF_8X16(100,1,29);//æ˜¾ç¤ºâ€œæ˜Ÿâ€
  254   1          ZF_8X16(88,1,28);//æ˜¾ç¤ºâ€œæœŸâ€
  255   1      
  256   1          //ä¸¤ä¸ªå†’å·
  257   1          shifen(12,40);
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 5   

  258   1          shifen(12,80);
  259   1      
  260   1      
  261   1          //æ—¶
  262   1          shifen_dh(8,3,(New_time_num[4])*32,40);
  263   1          shifen_dh(24,3,(New_time_num[5])*32,40);
  264   1      
  265   1          //åˆ†
  266   1          shifen_dh(48,3,(New_time_num[2])*32,40);
  267   1          shifen_dh(64,3,(New_time_num[3])*32,40);
  268   1      
  269   1          //ç§’
  270   1          shifen_dh(88,3,(New_time_num[0])*32,40);
  271   1          shifen_dh(104,3,(New_time_num[1])*32,40);
  272   1          time_synchronization();
  273   1      }
  274          
  275          
  276          //========================================================================
  277          // å‡½æ•°: TVMode2_int()
  278          // æè¿°: æ˜¾ç¤ºæ¸©åº¦æ¹¿åº¦æ°”å‹åˆå§‹åŒ–
  279          // å‚æ•°:
  280          // è¿”å›:
  281          // ç‰ˆæœ¬: V1.0 2023.02.05
  282          //========================================================================
  283          void TVMode2_int()
  284          {
  285   1          IU_Battery_Icon_S(80,0,1);
  286   1          time_show_s();
  287   1          shifen_dh(4,3,(dat00[0x0041]/1000)<<5,40);
  288   1          shifen_dh(20,3,((dat00[0x0041]%1000)/100)<<5,40);
  289   1          shifen_dh(36,3,11<<5,100);
  290   1          shifen_dh(44,3,((dat00[0x0041]%100)/10)<<5,40);
  291   1          shifen_dh(60,3,13<<5,100);
  292   1      
  293   1          UI_humidity();
  294   1          ZF_8X16(104,2,11);
  295   1          ZF_8X16(120,2,21);
  296   1          ZF_8X8(116,5,15);
  297   1          ZF_8X8(120,6,14);
  298   1          ZF_8X8(112,6,13);
  299   1          ZF_8X8(104,6,12);
  300   1          UI_pressure();
  301   1      
  302   1          time_synchronization();
  303   1      }
  304          
  305          
  306          //========================================================================
  307          // å‡½æ•°: TVMode3_int()
  308          // æè¿°: æ˜¾ç¤ºç”µæºæ˜¾ç¤ºç•Œé¢åˆå§‹åŒ–
  309          // å‚æ•°:
  310          // è¿”å›:
  311          // ç‰ˆæœ¬: V1.0 2023.02.05
  312          //========================================================================
  313          void TVMode3_int()
  314          {
  315   1          time_show_s();
  316   1          IU_Battery_cheek();
  317   1          IU_Battery_cheek_renovate();
  318   1          time_synchronization();
  319   1      }
  320          
  321          
  322          
  323          
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 6   

  324          //========================================================================
  325          // å‡½æ•°: void TVMode_1()
  326          // æè¿°: æ—¶é’Ÿç•Œé¢å±€éƒ¨åˆ·æ–°
  327          // å‚æ•°:
  328          // è¿”å›:
  329          // ç‰ˆæœ¬: V1.0 2023.02.05
  330          //========================================================================
  331          void TVMode_1()
  332          {
  333   1          u16 dat = 0;
  334   1      
  335   1          if(dat00[0x0009] & 0x0001)
  336   1          {
  337   2              //ç§’åˆ·æ–°
  338   2              shifen_dh(104,3,(33 - dat00[0x12] + (Low_time_num[1])*32),40);
  339   2              if(dat00[0x0000] & 0x0004)
  340   2              {
  341   3                  IU_Battery_Icon_S(80,0,0);
  342   3                  dat00[0x0000] &= ~0x0004;
  343   3              }
  344   2          }
  345   1          if(dat00[0x0009] & 0x0002)
  346   1          {
  347   2              shifen_dh(88,3,(33 - dat00[0x12] + (Low_time_num[0])*32),24);
  348   2          }
  349   1          if(dat00[0x0009] & 0x0004)
  350   1          {
  351   2              shifen_dh(64,3,(33 - dat00[0x12] + (Low_time_num[3])*32),40);
  352   2          }
  353   1          if(dat00[0x0009] & 0x0008)
  354   1          {
  355   2              shifen_dh(48,3,(33 - dat00[0x12] + (Low_time_num[2])*32),24);
  356   2          }
  357   1          if(dat00[0x0009] & 0x0010)
  358   1          {
  359   2              if((u8)(Low_time_num[4]) == 2)
  360   2              {
  361   3                  shifen_dh(24,3,(33 - dat00[0x12] + (Low_time_num[5])*32),16);
  362   3              }
  363   2              else
  364   2              {
  365   3                  shifen_dh(24,3,(33 - dat00[0x12] + (Low_time_num[5])*32),40);
  366   3              }
  367   2          }
  368   1          if(dat00[0x0009] & 0x0020)
  369   1          {
  370   2              shifen_dh(8,3,(33 - dat00[0x12] + (Low_time_num[4])*32),12);
  371   2          }
  372   1          if(dat00[0x0009] & 0x0040)
  373   1          {
  374   2              ZF_8X16(112,1,Week_conversion());
  375   2          }
  376   1          if(dat00[0x0009] & 0x0080)
  377   1          {
  378   2              yue_ri(59,(u8)((Time_New[4]/16*10) + (Time_New[4]%16)),0);//
  379   2          }
  380   1          if(dat00[0x0009] & 0x0100)
  381   1          {
  382   2              yue_ri(37,(u8)((Time_New[5]/16*10) + (Time_New[5]%16)),0);//
  383   2          }
  384   1          if(dat00[0x0009] & 0x0200)
  385   1          {
  386   2              yue_ri(16,(u8)((Time_New[6]/16*10) + (Time_New[6]%16)),0);//
  387   2          }
  388   1          //time_synchronization();
  389   1      }
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 7   

  390          
  391          
  392          
  393          
  394          //========================================================================
  395          // å‡½æ•°: void TVMode_23TimeRenew(u16 dat)
  396          // æè¿°: å·¦ä¸Šè§’æ—¶åˆ†ç§’å±€éƒ¨åˆ·æ–°
  397          // å‚æ•°: datåˆ·æ–°æ ‡å¿—ä½
  398          // è¿”å›:
  399          // ç‰ˆæœ¬: V1.0 2023.02.05
  400          //========================================================================
  401          void TVMode_23TimeRenew(u16 dat)
  402          {
  403   1      
  404   1          if(dat & 0x0001)//ç§’åˆ·æ–°
  405   1          {
  406   2              ZF_8X16(56,0,(u8)(New_time_num[1]));
  407   2          }
  408   1          if(dat & 0x0002)
  409   1          {
  410   2              ZF_8X16(48,0,(u8)(New_time_num[0]));
  411   2          }
  412   1      
  413   1      
  414   1          if(dat & 0x0004)
  415   1          {
  416   2              ZF_8X16(32,0,(u8)(New_time_num[3]));
  417   2          }
  418   1          if(dat & 0x0008)
  419   1          {
  420   2              ZF_8X16(24,0,(u8)(New_time_num[2]));
  421   2          }
  422   1      
  423   1      
  424   1          if(dat & 0x0010)
  425   1          {
  426   2              ZF_8X16(8,0,(u8)(New_time_num[5]));
  427   2      
  428   2          }
  429   1          if(dat & 0x0020)
  430   1          {
  431   2              ZF_8X16(0,0,(u8)(New_time_num[4]));
  432   2          }
  433   1      }
  434          
  435          
  436          //========================================================================
  437          // å‡½æ•°: void TVMode_2()
  438          // æè¿°: æ¸©åº¦æ¹¿åº¦æ°”å‹ç•Œé¢å±€éƒ¨åˆ·æ–°
  439          // å‚æ•°: 
  440          // è¿”å›:
  441          // ç‰ˆæœ¬: V1.0 2023.02.05
  442          //========================================================================
  443          void TVMode_2()
  444          {
  445   1          u16 dat = 0;
  446   1          IU_Battery_Icon_S(80,0,0);
  447   1          TVMode_23TimeRenew(dat00[0x0009]);
  448   1      
  449   1      
  450   1          dat = dat00[0x0041]/1000;
  451   1          if(dat != (Low_wendu/1000))
  452   1          {
  453   2              shifen_dh(4,3,dat<<5,40);
  454   2          }
  455   1      
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 8   

  456   1      
  457   1          dat = (dat00[0x0041]%1000)/100;
  458   1          if(dat != (Low_wendu%1000)/100)
  459   1          {
  460   2              shifen_dh(20,3,((dat00[0x0041]%1000)/100)<<5,40);
  461   2          }
  462   1      
  463   1      
  464   1          dat = (dat00[0x0041]%100)/10;
  465   1          if(dat != (Low_wendu % 100)/10)
  466   1          {
  467   2              shifen_dh(44,3,dat<<5,40);
  468   2          }
  469   1          //**************æ¸©æ¹¿åº¦*****************************
  470   1      
  471   1          UI_humidity();
  472   1          UI_pressure();
  473   1      
  474   1          Low_wendu = dat00[0x0041];
  475   1          time_synchronization();
  476   1      }
  477          
  478          
  479          //========================================================================
  480          // å‡½æ•°: void TVMode_2()
  481          // æè¿°: ç”µæºæ˜¾ç¤ºç•Œé¢å±€éƒ¨åˆ·æ–°
  482          // å‚æ•°: 
  483          // è¿”å›:
  484          // ç‰ˆæœ¬: V1.0 2023.02.05
  485          //========================================================================
  486          void TVMode_3()
  487          {
  488   1          u16 dat = 0;
  489   1      
  490   1          //ADC_Get_V1();
  491   1          TVMode_23TimeRenew(dat00[0x0009]);
  492   1          IU_Battery_cheek_renovate();
  493   1          time_synchronization();
  494   1      }
  495          
  496          
  497          
  498          
  499          
  500          
  501          
  502          //========================================================================
  503          // å‡½æ•°: IU_TVMode()
  504          // æè¿°: TVæ¨¡å¼ä»»åŠ¡å¤„ç†
  505          // å‚æ•°: 
  506          // è¿”å›:
  507          // ç‰ˆæœ¬: V1.0 2023.02.05
  508          //========================================================================
  509          void IU_TVMode()
  510          {
  511   1          u8 a = 0;
  512   1          u16 DA=0;
  513   1          u16 DB=0;
  514   1          u16 DC=0;
  515   1      
  516   1          if(dat00[0x10] == 0x0020 && dat00[0x1A] == 0 && dat00[0x002E] > 0)//TVæ—¶é’Ÿæ¨¡å¼
  517   1          {
  518   2              if((dat00[0x002E] & 0x0001) && !(dat00[0x002E] & 0x0002))
  519   2              {
  520   3                  dat00[0x002E] |= 0x0002;                                      //éšè—å¯„å­˜å™¨ï¼ˆæ—¶é—´æ›´æ–°çŠ¶æ€ä½å¯„å­˜å™¨
             -ï¼‰0x0002 å¼€å§‹ç§’åˆ·æ–°æ ‡å¿—ä½
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 9   

  521   3              }
  522   2              if((dat00[0x002E] & 0x0001) && (dat00[0x002E] & 0x0002))
  523   2              {
  524   3                  if(dat00[0x12] == 0x0000 && !(dat00[0x002E] & 0x0004))        //UIçº¿ç¨‹è¿ç®—æ¬¡æ•°ä¸ºé›¶ + ä¸å
             -œ¨ç§’åˆ·æ–°
  525   3                  {
  526   4                      dat00[0x12] = 32;                                         //UIçº¿ç¨‹è¿ç®—æ¬¡æ•°å¯„å­˜å™¨ = 32
  527   4                      fast_SleepQueue_aheadW1(8,1,32);                          //ç”³è¯·32ä¸ªUIåˆ·æ–°ä»»åŠ¡
  528   4                      dat00[0x002E] |= 0x0004;                                  //éšè—å¯„å­˜å™¨ï¼ˆæ—¶é—´æ›´æ–°çŠ¶æ€ä½å¯„å­˜å
             -™¨ï¼‰0x0004 å¼€å§‹ç§’åˆ·æ–°æ ‡å¿—ä½
  529   4                      dat00[0x0006] |= 0x0002;                                  //dat00[0x0006] bit1ï¼š0 æ—¶é’Ÿæ»šåŠ¨ç©ºé—² 1 æ—
             -¶é’Ÿæ»šåŠ¨ç¹å¿™
  530   4                      dat00[0] |= 0x0100;                                       //dat00[0x0006] bit8ï¼š0 UIç©ºé—² 1 UIæ»šåŠ¨
  531   4                  }
  532   3                  if(dat00[0x12] != 0x0000 && (dat00[0x002E] & 0x0004))         //UIçº¿ç¨‹è¿ç®—æ¬¡æ•°ä¸ä¸ºé›¶ + è
             -¿˜åœ¨ç§’åˆ·æ–°
  533   3                  {
  534   4                      TVMode_1();                                               //ç§’åˆ·æ–°
  535   4                      dat00[0x12]--;                                            //UIçº¿ç¨‹è¿ç®—æ¬¡æ•°-1
  536   4                  }
  537   3                  if(dat00[0x12] == 0x0000 && (dat00[0x002E] & 0x0004))         //UIçº¿ç¨‹è¿ç®—æ¬¡æ•°ä¸ºé›¶ + è¿˜å
             -œ¨ç§’åˆ·æ–°
  538   3                  {
  539   4                      dat00[0x002E] = 0;                                        //ç»“æŸä»»åŠ¡
  540   4                      dat00[0x0006] &= ~0x0002;                                 //dat00[0x0006] bit1ï¼š0 æ—¶é’Ÿæ»šåŠ¨ç©ºé—² 1 æ
             -—¶é’Ÿæ»šåŠ¨ç¹å¿™
  541   4                      dat00[0] |= 0x0100;                                       //dat00[0x0006] bit1ï¼š0 æ—¶é’Ÿæ»šåŠ¨ç©ºé—² 1 æ—¶é
             -’Ÿæ»šåŠ¨ç¹å¿™
  542   4                      time_synchronization();
  543   4                  }
  544   3              }
  545   2          }
  546   1          else if(dat00[0x10] == 0x0021 && dat00[0x1A] == 0 && dat00[0x002E] > 0)//TVæ—¶é’Ÿæ¨¡å¼
  547   1          {
  548   2              TVMode_2();
  549   2              dat00[0x002E] = 0;
  550   2              time_synchronization();
  551   2          }
  552   1          else if(dat00[0x10] == 0x0022 && dat00[0x1A] == 0 && dat00[0x002E] > 0)//TVæ—¶é’Ÿæ¨¡å¼
  553   1          {
  554   2              TVMode_3();
  555   2              dat00[0x002E] = 0;
  556   2              time_synchronization();
  557   2          }
  558   1      
  559   1      
  560   1      
  561   1      
  562   1      
  563   1              a = (u8)P45 + (u8)P46 + (u8)P27;//æŸ¥è¯¢å¿«é€ŸæŸ¥è¯¢æŒ‰é”®çŠ¶æ€
  564   1              if((dat00[0x0000] & 0x0008) && (a == 3) && (dat00[0x0010] >= 0x0020 &&  dat00[0x0010] <= 0x0022) 
             -&& dat00[0x1A] == 0)
  565   1              {
  566   2                  if(dat00[0x37])//å¦‚æœæ˜¯ä½åŠŸè€—æ¨¡å¼åˆ™è°ƒç”¨ä½åŠŸè€—æ¨¡å¼çš„æ˜¾ç¤ºæ—¶é•¿
  567   2                  {
  568   3                      DA=dat00[0x0031];//æ—¶é—´æ˜¾ç¤ºæ¨¡å¼æ—¶é•¿
  569   3                      DB=dat00[0x0032];//æ¸©åº¦æ¹¿åº¦æ˜¾ç¤ºæ¨¡å¼æ—¶é•¿
  570   3                      DC=dat00[0x0033];//ç”µæºæ˜¾ç¤ºæ¨¡å¼
  571   3                  }
  572   2                  else
  573   2                  {
  574   3                      DA=dat00[0x0022];
  575   3                      DB=dat00[0x0023];
  576   3                      DC=dat00[0x0024];
  577   3                  }
  578   2                  dat00[0x002D]++;                                    //è®¡æ—¶
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 10  

  579   2                  if(dat00[0x0010] == 0x0020)                         //å¦‚æœæ˜¯æ—¶é—´æ˜¾ç¤ºé¡µé¢
  580   2                  {
  581   3                      if(dat00[0x002D] >= DA)                         //æ—¶é—´æ˜¾ç¤ºé¡µé¢åˆ°è¾¾æŒ‡å®šçš„æ—¶é—´
  582   3                      {
  583   4                        if(DB > 0)                                  //æ¸©æ¹¿åº¦æ˜¾ç¤ºè®¾å®šæ—¶é—´ä¸ä¸º0ï¼Œè·³åˆ°è¯¥é¡µé¢
  584   4                          {
  585   5                              dat00[0x10]=0x0021;
  586   5                              dat00_flag[0x10]=1;
  587   5                          }
  588   4                          else if(DC > 0)                                 //ç”µæºæ˜¾ç¤ºè®¾å®šæ—¶é—´ä¸ä¸º0ï¼Œè·³åˆ°è¯¥é¡µé¢
  589   4                          {
  590   5                              dat00[0x10]=0x0022;
  591   5                              dat00_flag[0x10]=1;
  592   5                          }
  593   4                          if((dat00[0x37] > 0) && (DB == 0) && (DC == 0))  dat00[0] |= 0x0020;
  594   4                          dat00[0x002D]=0;
  595   4                      }
  596   3                  }
  597   2                  else if(dat00[0x0010] == 0x0021)
  598   2                  {
  599   3                      if(dat00[0x002D] >= DB)
  600   3                      {
  601   4                          if(DC > 0)
  602   4                          {
  603   5                              dat00[0x10]=0x0022;
  604   5                              dat00_flag[0x10]=1;
  605   5                          }
  606   4                          else if(DA > 0)
  607   4                          {
  608   5                              dat00[0x10]=0x0020;
  609   5                              dat00_flag[0x10]=1;
  610   5                          }
  611   4                          if((dat00[0x37] > 0) && (DC == 0))  dat00[0] |= 0x0020;
  612   4                          dat00[0x002D]=0;
  613   4                      }
  614   3                  }
  615   2                  else if(dat00[0x0010] == 0x0022)
  616   2                  {
  617   3                      if(dat00[0x002D] >= DC)
  618   3                      {
  619   4                          dat00[0x10]=0x0020;
  620   4                          dat00_flag[0x10]=1;
  621   4                          dat00[0x002D]=0;
  622   4                          if((dat00[0x37] > 0))  dat00[0] |= 0x0020;
  623   4                      }
  624   3                  }
  625   2              
  626   2              dat00[0x0000] &= ~0x0008;
  627   2          }
  628   1      
  629   1      }
  630          
  631          
  632          
  633          
  634          
  635          
  636          
  637          
  638          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      2670     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
C251 COMPILER V5.60.0,  TV_Mode                                                            25/04/24  00:23:38  PAGE 11  

  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        17          3
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        11     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
